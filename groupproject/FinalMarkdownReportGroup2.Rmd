---
title: "Day 5"
author: "Taraneh"
date: "2022-09-20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data set description ##
The txt-file _exam_nontidy.txt_ contains a large dataset of many variables and a large number of observations. 
One way to explore the data is by the `read_delim()` function.

## Reading the data ##
In order to read the file, the following should be used: 
```{r, eval=FALSE}
read_csv(here("DATA", "exam_nontidy.txt"))
```
and also one should assign the data to an object **exam_data**.

## Tidying the data ##
By using `colnames()` function, we could inspect the variables (i.e. columns) to make sure their names are OK for use in R. 
The following variables needed to be renamed:

|Old name|New name|
|:--------:|:--------:|
|RBC.Age.Group|RBC_Age_Group|
|Median.RBC.Age|RBC_Age_Group|
|1_Age|Age|
|T stage|Tstage|
|BN+|BNplus|
|volume measurement|volume_measurement|
|.value|volume_value|

The way to change the column names: 

```{r, eval=FALSE}
exam_data <-
  exam_data %>%
  rename(RBC_Age_Group = RBC.Age.Group,
         Median_RBC_Age = Median.RBC.Age,
         Age = `1_Age`,
         Tstage = `T stage`,
         BNplus = `BN+`,
         volume_measurement = `volume measurement`,
         volume_value = .value)
```

Another observation is that each subject has two rows, which is unnecessary, and the reason for having two: _volume_measurement_ has two categories: _PVol_ and _TVol_. To separate them so that we have each subject only once, we can use `pivot_wider()` function like this: 

```{r, eval=FALSE}
exam_data <-
  exam_data %>%
  pivot_wider(names_from = volume_measurement,
              values_from = volume_value)
```

The dataset is now tidy and ready for further use. 

## Appendix ##
```{r}
sessionInfo()
```

